= form_for @source, html: { class: 'form' } do |f|
  %fieldset
    - if @source.new_record?
      %fieldset
        %legend Fichier

        - if @source.errors.include? :sha256
          .errors
            %p Veuillez sélectionner un fichier

        - if @source.errors.include? :charset
          .errors
            %p Erreur lors de l'enregistrement de votre fichier :
            %ul
              - @source.errors[:charset].each do |e|
                %li= e

        %p.field
          = f.file_field :file

        %p.field
          = f.check_box :file_header
          = f.label :file_header, 'ce fichier comporte un en-tête'

    %p.field
      %label
        Label
        %br
        = f.text_field :label, placeholder: 'optionnel, utilisera le nom de votre fichier'

    %p.field
      %label
        Description
        %br
        = f.text_area :description, placeholder: 'Description multi-ligne optionnelle…'

    - if @source.persisted?
      .field
        %p En-tête
        = render 'headers/form_fields', f: f


  %ul.actions
    %li
      = f.submit 'Enregistrer'
    %li
      = link_to 'Retour', sources_path
